@using Microsoft.AspNetCore.Components.Web

<ErrorBoundary @ref="_errorBoundary">
    <ChildContent>
        @ChildContent
    </ChildContent>
    <ErrorContent Context="exception">
        <div class="global-error-boundary">
            <div class="global-error-card">
                <div class="global-error-icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                </div>
                <h2>Something went wrong</h2>
                <p>An unexpected error occurred. Please try reloading the page.</p>
                <button class="btn btn-primary" @onclick="Recover">
                    Reload
                </button>
            </div>
        </div>
    </ErrorContent>
</ErrorBoundary>

@code {
    private ErrorBoundary? _errorBoundary;

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    private void Recover()
    {
        _errorBoundary?.Recover();
    }
}
