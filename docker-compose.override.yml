# Local development override â€” automatically loaded by `docker compose up`
#
# Uses SQLite + Seq for a zero-dependency dev experience.
# To run production-style (PostgreSQL) instead, use:
#   docker compose -f docker-compose.yml up

services:
  hotbox:
    build:
      context: .
      dockerfile: Dockerfile
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - Database__Provider=sqlite
      - Database__ConnectionString=Data Source=/data/hotbox.db
      - Jwt__Secret=${JWT_SECRET:-ThisIsADevelopmentSecretKeyThatIsLongEnoughForHMACSHA256!}
      - Observability__SeqUrl=http://seq:5341
      - Observability__LogLevel=Debug
    volumes:
      - hotbox-data:/data
    depends_on:
      seq:
        condition: service_started

  seq:
    image: datalust/seq:latest
    container_name: hotbox-seq
    restart: unless-stopped
    environment:
      - ACCEPT_EULA=Y
      - SEQ_FIRSTRUN_NOAUTHENTICATION=true
    ports:
      - "7241:5341"   # Ingestion API
      - "7201:80"     # Web UI
    volumes:
      - seqdata:/data

volumes:
  hotbox-data:
  seqdata:
