# Development overlay â€” use with: docker compose -f docker-compose.yml -f docker-compose.dev.yml up
#
# Adds:
#   - Seq for log aggregation (UI at http://localhost:7201)
#   - SQLite instead of PostgreSQL
#   - Development environment variables
#
# Note: The PostgreSQL container from docker-compose.yml will still start but
# the app uses SQLite via the environment overrides below.

services:
  hotbox:
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - Database__Provider=sqlite
      - Database__ConnectionString=Data Source=/data/hotbox.db
      - Jwt__Secret=${JWT_SECRET:-ThisIsADevelopmentSecretKeyThatIsLongEnoughForHMACSHA256!}
      - Observability__SeqUrl=http://seq:5341
      - Observability__LogLevel=Debug
    volumes:
      - hotbox-data:/data

  seq:
    image: datalust/seq:latest
    container_name: hotbox-seq
    restart: unless-stopped
    environment:
      - ACCEPT_EULA=Y
      - SEQ_FIRSTRUN_NOAUTHENTICATION=true
    ports:
      - "7241:5341"   # Ingestion API
      - "7201:80"     # Web UI
    volumes:
      - seqdata:/data

volumes:
  hotbox-data:
  seqdata:
